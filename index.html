<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Regalo üåª</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap');

    /* Reset y base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Georgia', serif;
      background-color: black;
      color: #fffad1;
      overflow: hidden;
      min-height: 100vh;
    }

    .oculto {
      display: none !important;
    }

    /* Pantalla de contrase√±a */
    #pantalla-password {
      background: linear-gradient(135deg, #000000, #1a1a1a);
      width: 100vw;
      height: 100vh;
      position: fixed;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: all 0.8s ease-out;
    }

    #pantalla-password.saliendo {
      opacity: 0;
      transform: scale(0.95);
    }

    .banner-password {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      color: #fff8c2;
      text-shadow: 0 0 20px rgba(255, 248, 194, 0.6);
      margin-bottom: 3rem;
      text-align: center;
      animation: brilloSuave 3s ease-in-out infinite alternate;
    }

    @keyframes brilloSuave {
      from {
        text-shadow: 0 0 15px rgba(255, 248, 194, 0.4);
      }

      to {
        text-shadow: 0 0 25px rgba(255, 248, 194, 0.8);
      }
    }

    #inputPassword {
      padding: 15px 20px;
      font-size: 1.3rem;
      font-family: 'Playfair Display', serif;
      border-radius: 50px;
      border: 2px solid #fff8c2;
      outline: none;
      background: rgba(255, 248, 194, 0.1);
      color: #fff8c2;
      width: 300px;
      text-align: center;
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    #inputPassword:focus {
      border-color: #ffe066;
      box-shadow: 0 0 20px rgba(255, 224, 102, 0.5);
      background: rgba(255, 248, 194, 0.15);
    }

    #inputPassword::placeholder {
      color: rgba(255, 248, 194, 0.7);
    }

    #verificarPassword {
      padding: 12px 30px;
      font-size: 1.2rem;
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      background: linear-gradient(45deg, transparent, rgba(255, 248, 194, 0.2));
      color: #fff8c2;
      border: 2px solid #fff8c2;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.4s ease;
      backdrop-filter: blur(5px);
    }

    #verificarPassword:hover {
      background: rgba(255, 248, 194, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 5px 25px rgba(255, 248, 194, 0.4);
    }

    #errorPassword {
      color: #ff6b6b;
      margin-top: 15px;
      font-size: 1.1rem;
      text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
    }

    /* Contenido principal */
    #contenido {
      position: relative;
      width: 100%;
      height: 100vh;
      opacity: 0;
      transform: scale(1.05);
      transition: all 1s ease-out;
    }

    #contenido.visible {
      opacity: 1;
      transform: scale(1);
    }

    /* Poema 2020 */
    .poema2020 {
      width: 100vw;
      height: 100vh;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      transition: all 0.8s ease-in-out;
    }

    .poema2020.saliendo {
      opacity: 0;
      transform: scale(0.95) translateY(-30px);
    }

    /* Fondo de girasoles 2020 */
    .poema2020::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: url("bg.2020.jpeg");
      background-size: cover;
      background-position: center bottom;
      background-repeat: no-repeat;
      z-index: -2;
    }

    /* Para PC - mostrar horizontal con flores abajo */
    @media screen and (min-width: 769px) {
      .poema2020::before {
        background-position: center bottom;
        background-size: cover;
      }
    }

    /* Para m√≥viles - ajustar verticalmente */
    @media screen and (max-width: 768px) {
      .poema2020::before {
        background-position: center center;
        background-size: cover;
      }
    }

    .verso-2020 {
      font-family: 'Great Vibes', cursive;
      font-size: 2.5rem;
      color: #fff8c2;
      text-shadow:
        0 0 20px rgba(255, 248, 194, 0.8),
        2px 2px 4px rgba(0, 0, 0, 0.8);
      animation: resplandor 3s ease-in-out infinite alternate;
      padding: 20px;
      margin-bottom: 2rem;
      line-height: 1.4;
      text-align: center;
    }

    .verso-2020 .carita {
      font-size: 0.7em;
    }

    @keyframes resplandor {
      from {
        text-shadow:
          0 0 15px rgba(255, 248, 194, 0.6),
          2px 2px 4px rgba(0, 0, 0, 0.8);
      }

      to {
        text-shadow:
          0 0 30px rgba(255, 248, 194, 1),
          0 0 50px rgba(255, 224, 102, 0.6),
          2px 2px 4px rgba(0, 0, 0, 0.8);
      }
    }

    /* Bot√≥n 2025 */
    #boton2025 {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      font-weight: 600;
      background: linear-gradient(45deg, transparent, rgba(255, 248, 194, 0.2));
      color: #fff8c2;
      border: 2px solid #ffe066;
      padding: 15px 30px;
      cursor: pointer;
      border-radius: 50px;
      transition: all 0.4s ease;
      box-shadow: 0 0 15px rgba(255, 224, 102, 0.3);
      backdrop-filter: blur(5px);
    }

    #boton2025:hover {
      background: rgba(255, 248, 194, 0.2);
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 30px rgba(255, 224, 102, 0.5);
    }

    /* Poema 2025 */
    .poema2025 {
      width: 100vw;
      height: 100vh;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      opacity: 0;
      transform: scale(1.1);
      transition: all 0.8s ease-in-out;
    }

    .poema2025.visible {
      opacity: 1;
      transform: scale(1);
    }

    .video-fondo {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .poema-contenido {
      z-index: 2;
      text-align: center;
      padding: 2rem;
      max-width: 90%;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #lineas-poema {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 500;
      font-style: italic;
      font-size: 2.4rem;
      color: #fff8c2;
      text-shadow:
        0 0 20px rgba(255, 248, 194, 0.8),
        2px 2px 4px rgba(0, 0, 0, 0.9);
      line-height: 1.6;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .linea-verso {
      opacity: 0;
      transform: translateY(30px);
      animation: aparecerLinea 1.2s ease-out forwards;
      margin-bottom: 0.5rem;
      display: block;
    }

    @keyframes aparecerLinea {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Frase final con efectos especiales */
    .frase-final {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
      text-align: center;
      padding: 2rem;
      max-width: 90%;
      width: 100%;
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8);
      transition: opacity 1s ease-out, transform 1s ease-out;
      will-change: opacity, transform;
    }

    .frase-final.visible {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .texto-final {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 600;
      font-style: italic;
      font-size: 2.2rem;
      color: #fff570;
      text-shadow:
        0 0 25px rgba(255, 255, 112, 0.9),
        0 0 50px rgba(255, 224, 102, 0.7),
        3px 3px 6px rgba(0, 0, 0, 1);
      cursor: pointer;
      position: relative;
      display: inline-block;
      line-height: 1.4;
      max-width: 100%;
      word-wrap: break-word;
      user-select: none;
      will-change: transform;
      transition: transform 0.2s ease-out;
    }

    .texto-final:hover {
      transform: scale(1.02);
    }

    .texto-final:active {
      transform: scale(0.98);
    }

    .felicitacion {
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem;
      color: #fff570;
      margin-top: 1.5rem;
      font-weight: 600;
      text-shadow: 0 0 20px rgba(255, 248, 194, 0.6);
    }

    /* Girasol estilo emoji 2D */
    .girasol-container {
      position: absolute;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 4;
      opacity: 0;
      transition: opacity 1s ease-out;
    }

    .girasol-container.visible {
      opacity: 1;
    }

    .girasol-emoji {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: transform 0.3s ease-out;
      will-change: transform;
    }

    .girasol-emoji:hover {
      transform: scale(1.1);
    }

    .girasol-flor {
      width: 60px;
      height: 60px;
      position: relative;
      margin-bottom: -5px;
    }

    .girasol-centro-pequeno {
      width: 20px;
      height: 20px;
      background: radial-gradient(circle, #5D4037, #3E2723);
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
    }

    .petalo-pequeno {
      position: absolute;
      width: 12px;
      height: 25px;
      background: linear-gradient(to top, #FFD700, #FFC107);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      top: 50%;
      left: 50%;
    }

    .petalo-pequeno:nth-child(1) { transform: translate(-50%, -50%) rotate(0deg) translateY(-18px); }
    .petalo-pequeno:nth-child(2) { transform: translate(-50%, -50%) rotate(45deg) translateY(-18px); }
    .petalo-pequeno:nth-child(3) { transform: translate(-50%, -50%) rotate(90deg) translateY(-18px); }
    .petalo-pequeno:nth-child(4) { transform: translate(-50%, -50%) rotate(135deg) translateY(-18px); }
    .petalo-pequeno:nth-child(5) { transform: translate(-50%, -50%) rotate(180deg) translateY(-18px); }
    .petalo-pequeno:nth-child(6) { transform: translate(-50%, -50%) rotate(225deg) translateY(-18px); }
    .petalo-pequeno:nth-child(7) { transform: translate(-50%, -50%) rotate(270deg) translateY(-18px); }
    .petalo-pequeno:nth-child(8) { transform: translate(-50%, -50%) rotate(315deg) translateY(-18px); }

    .girasol-tallo {
      width: 4px;
      height: 40px;
      background: linear-gradient(to bottom, #4CAF50, #2E7D32);
      border-radius: 2px;
      position: relative;
    }

    .girasol-hoja {
      position: absolute;
      width: 15px;
      height: 8px;
      background: linear-gradient(45deg, #4CAF50, #66BB6A);
      border-radius: 50% 10px 50% 10px;
      top: 15px;
      left: -8px;
      transform: rotate(-30deg);
    }

    .girasol-emoji.balanceando {
      animation: balanceoSuave 2s ease-in-out;
    }

    @keyframes balanceoSuave {
      0%, 100% { transform: rotate(0deg) scale(1); }
      25% { transform: rotate(-10deg) scale(1.05); }
      75% { transform: rotate(10deg) scale(1.05); }
    }

    /* Brillos decorativos de fondo */
    .brillos-decorativos {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1s ease-out;
    }

    .brillos-decorativos.visible {
      opacity: 1;
    }

    .brillo-decorativo {
      position: absolute;
      width: 6px;
      height: 6px;
      background: radial-gradient(circle, #fff570, rgba(255, 245, 112, 0.2));
      border-radius: 50%;
      animation: brilloFlotante 4s ease-in-out infinite;
      will-change: transform, opacity;
    }

    @keyframes brilloFlotante {
      0%, 100% {
        opacity: 0.3;
        transform: scale(0.5) translateY(0px);
      }
      50% {
        opacity: 1;
        transform: scale(1.2) translateY(-20px);
      }
    }

/* Firma del creador */
.firma-creador {
  position: fixed;
  bottom: 15px;
  left: 20px;
  z-index: 10;

  font-family: 'Great Vibes', cursive;
  font-size: 1.2rem;
  color: rgba(0, 0, 0, 0.85);
  background-color: #fff8c2;
  padding: 5px 10px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(255, 248, 194, 0.6);

  opacity: 0;
  transition: all 0.5s ease-out;

  display: inline-block;
  max-width: fit-content;

  pointer-events: none;
}

.firma-creador.visible {
  opacity: 1;
  animation: aparecerFirma 1s ease-out forwards;
}

@keyframes aparecerFirma {
  from {
    opacity: 0;
    transform: translateY(10px);  
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.firma-creador:hover {
  background-color: #fff1a8;
  transform: scale(1.05);
}


    /* Bot√≥n volver */
    #volver {
      position: absolute;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 4;
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem;
      font-weight: 600;
      background: linear-gradient(45deg, transparent, rgba(255, 248, 194, 0.2));
      border: 2px solid #ffe066;
      padding: 12px 25px;
      color: #fff8c2;
      cursor: pointer;
      border-radius: 50px;
      transition: all 0.4s ease;
      backdrop-filter: blur(5px);
      display: none;
      opacity: 0;
    }

    #volver.visible {
      display: block;
      opacity: 1;
      animation: aparecerBoton 1s ease-out forwards;
    }

    @keyframes aparecerBoton {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    #volver:hover {
      background: rgba(255, 248, 194, 0.2);
      transform: translateX(-50%) translateY(-2px) scale(1.05);
      box-shadow: 0 5px 25px rgba(255, 224, 102, 0.4);
    }

    /* Canvas de brillos interactivos */
    #brillosCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
      will-change: auto;
    }

    /* Part√≠culas brillantes optimizadas */
    .particula-brillo {
      position: absolute;
      width: 4px;
      height: 4px;
      background: radial-gradient(circle, #fff570, rgba(255, 245, 112, 0.3));
      border-radius: 50%;
      pointer-events: none;
      animation: flotarParticula 3s ease-out forwards;
      z-index: 2;
      will-change: transform, opacity;
    }

    @keyframes flotarParticula {
      0% {
        transform: translateY(0) rotate(0deg) scale(0);
        opacity: 0;
      }

      10% {
        opacity: 1;
        transform: translateY(-15px) rotate(45deg) scale(1);
      }

      50% {
        opacity: 0.8;
        transform: translateY(-80px) rotate(180deg) scale(1.1);
      }

      100% {
        opacity: 0;
        transform: translateY(-150px) rotate(360deg) scale(0);
      }
    }

    /* Overlay invisible para capturar eventos */
    .evento-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 3;
      background: transparent;
      cursor: pointer;
      display: none;
    }

    .evento-overlay.activo {
      display: block;
    }

    /* Responsive para tablets */
    @media screen and (max-width: 1024px) {
      .banner-password {
        font-size: 2.2rem;
      }

      .verso-2020 {
        font-size: 2.2rem;
      }

      #lineas-poema {
        font-size: 2.2rem;
      }

      .texto-final {
        font-size: 2rem;
      }

      .felicitacion {
        font-size: 1.5rem;
      }

      .frase-final {
        max-width: 85%;
      }

      .girasol-flor {
        width: 55px;
        height: 55px;
      }

      .firma-creador {
        font-size: 1.1rem;
      }
    }

    /* Responsive para m√≥viles - TEXTO M√ÅS GRANDE */
    @media screen and (max-width: 768px) {
      .banner-password {
        font-size: 2rem;
        margin-bottom: 2rem;
        padding: 0 1rem;
      }

      #inputPassword {
        width: 280px;
        font-size: 1.2rem;
      }

      .verso-2020 {
        font-size: 2rem;
        padding: 15px;
      }

      #boton2025 {
        font-size: 1.3rem;
        padding: 12px 25px;
      }

      #lineas-poema {
        font-size: 2.6rem; /* Aumentado para m√≥viles */
      }

      .texto-final {
        font-size: 1.9rem; /* Reducido para que no tape */
        padding: 0 1rem;
      }

      .felicitacion {
        font-size: 1.4rem;
      }

      .frase-final {
        max-width: 95%;
        padding: 1rem;
        top: 55%;
      }

      #volver {
        bottom: 30px;
        font-size: 1.1rem;
        padding: 10px 20px;
      }

      .girasol-flor {
        width: 50px;
        height: 50px;
      }

      .girasol-container {
        top: 15%;
      }

      .firma-creador {
        font-size: 1rem;
        top: 10px;
        right: 15px;
      }
    }

    @media screen and (max-width: 480px) {
      .banner-password {
        font-size: 1.7rem;
      }

      #inputPassword {
        width: 250px;
        font-size: 1.1rem;
      }

      .verso-2020 {
        font-size: 1.8rem;
      }

      #lineas-poema {
        font-size: 2.4rem; /* Mejorado para pantallas peque√±as */
      }

      .texto-final {
        font-size: 1.7rem; /* Reducido para pantallas peque√±as */
      }

      .felicitacion {
        font-size: 1.3rem;
      }

      #volver {
        bottom: 20px;
        font-size: 1rem;
        padding: 8px 16px;
      }

      .girasol-flor {
        width: 45px;
        height: 45px;
      }

      .firma-creador {
        font-size: 0.9rem;
      }
    }

    @media screen and (max-width: 360px) {
      .banner-password {
        font-size: 1.5rem;
      }

      #inputPassword {
        width: 220px;
        font-size: 1rem;
      }

      .verso-2020 {
        font-size: 1.6rem;
      }

      #lineas-poema {
        font-size: 2.2rem; /* Mejorado para pantallas muy peque√±as */
      }

      .texto-final {
        font-size: 1.5rem; /* Reducido para pantallas muy peque√±as */
      }

      .felicitacion {
        font-size: 1.2rem;
      }

      .girasol-flor {
        width: 40px;
        height: 40px;
      }

      .firma-creador {
        font-size: 0.8rem;
      }
    }

    .carita {
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      opacity: 0.8;
    }
  </style>
</head>

<body>
  <!-- Pantalla de contrase√±a -->
  <div id="pantalla-password">
    <h1 class="banner-password">Escriba la contrase√±a:</h1>
    <input type="password" id="inputPassword" placeholder="Ingresa la contrase√±a..." />
    <button id="verificarPassword">Entrar</button>
    <p id="errorPassword"></p>
  </div>

  <!-- Contenido protegido -->
  <div id="contenido" class="oculto">
    <!-- Poema 2020 -->
    <section id="poema2020" class="poema2020">
      <div class="poema-contenido">
        <p class="verso-2020">
          "Tu apariencia me encant√≥,<br />
          pero fue tu forma de ser la que me agrad√≥ <span class="carita">:)</span>"
        </p>
      </div>
      <button id="boton2025">Poema 2025 üåª</button>
    </section>

    <!-- Poema 2025 -->
    <section id="poema2025" class="poema2025 oculto">
      <!-- Video de fondo -->
      <video autoplay muted loop playsinline class="video-fondo">
        <source src="bg.2025.mp4" type="video/mp4" />
        Tu navegador no soporta el elemento video.
      </video>
      
      <!-- Girasol interactivo estilo emoji -->
      <div class="girasol-container" id="girasolContainer">
        <div class="girasol-emoji" id="girasolEmoji">
          <div class="girasol-flor">
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="petalo-pequeno"></div>
            <div class="girasol-centro-pequeno"></div>
          </div>
          <div class="girasol-tallo">
            <div class="girasol-hoja"></div>
          </div>
        </div>
      </div>

      <!-- Brillos decorativos -->
      <div class="brillos-decorativos" id="brillosDecorativos"></div>

      <div class="poema-contenido">
        <div id="lineas-poema"></div>
      </div>
      <div class="frase-final" id="fraseFinal">
        <div class="texto-final" id="textoFinal">
          "Nunca dejes de florecer, para as√≠ poder disfrutar y admirar un mejor amanecer."
        </div>
        <div class="felicitacion">Feliz cumplea√±os, Johana üåª</div>
      </div>
      <div class="evento-overlay" id="eventoOverlay"></div>
      <button id="volver">Volver a ver</button>
    </section>

    <canvas id="brillosCanvas"></canvas>
    <div id="particulas-container"></div>
  </div>

  <!-- Firma del creador -->
  <div class="firma-creador">Creado por: Joseph üå†</div>

  <script>
    // Elementos del DOM
    const passwordInput = document.getElementById("inputPassword");
    const verificarBtn = document.getElementById("verificarPassword");
    const errorPassword = document.getElementById("errorPassword");
    const pantallaPassword = document.getElementById("pantalla-password");
    const contenido = document.getElementById("contenido");
    const seccion2020 = document.getElementById("poema2020");
    const seccion2025 = document.getElementById("poema2025");
    const boton2025 = document.getElementById("boton2025");
    const lineasPoema = document.getElementById("lineas-poema");
    const fraseFinal = document.getElementById("fraseFinal");
    const textoFinal = document.getElementById("textoFinal");
    const eventoOverlay = document.getElementById("eventoOverlay");
    const volverBtn = document.getElementById("volver");
    const canvas = document.getElementById("brillosCanvas");
    const ctx = canvas.getContext("2d");
    const particulasContainer = document.getElementById("particulas-container");
    const girasol = document.getElementById("girasolEmoji");
    const girasolContainer = document.getElementById("girasolContainer");
    const brillosDecorativos = document.getElementById("brillosDecorativos");
    const firmaCreador = document.querySelector(".firma-creador");

    // Variables de control
    let isPressed = false;
    let pressTimeout = null;
    const poolParticulas = [];
    let index = 0;
    let animacionActiva = false;
    let lastTime = 0;
    let brillos = [];

    // Versos del poema 2025
    const versos = [
      "Cuando todo era simple y sin condici√≥n,",
      "brillabas sin dar explicaci√≥n.",
      "Con pasos suaves, sonrisas sinceras,",
      "sin saber que ya eras primavera.",
      "",
      "Vinieron pruebas, caminos cerrados,",
      "y t√∫ seguiste avanzando, a√∫n en caminos quebrados.",
      "Dec√≠as \"soy fuerte\" en tu caminar,",
      "como quien lucha sin aparentar.",
      "",
      "No es f√°cil subir a la cima cuando hay peso,",
      "pero t√∫ sigue avanzando, sin dar retroceso.",
      "Porque en cada paso, Dios va contigo,",
      "y es √âl quien siempre gu√≠a tu camino.",
      "",
      "Yo siempre estoy presente, dispuesto a ayudarte,",
      "ser quien te escuche, sin necesidad de juzgarte.",
      "Porque no puedo alejarme, ni dejar de cuidar,",
      "a quien tanto aprend√≠ a atesorar."
    ];

    // Configurar canvas con optimizaci√≥n
    function setupCanvas() {
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      ctx.scale(dpr, dpr);
      canvas.style.width = rect.width + 'px';
      canvas.style.height = rect.height + 'px';
    }
    setupCanvas();
    window.addEventListener('resize', setupCanvas);

    // Verificaci√≥n de contrase√±a
    function verificarPassword() {
      const password = passwordInput.value.trim();
      
      if (password === "poema2020") {
        pantallaPassword.classList.add('saliendo');
        setTimeout(() => {
          pantallaPassword.style.display = "none";
          contenido.classList.remove("oculto");
          setTimeout(() => {
            contenido.classList.add("visible");
          }, 100);
        }, 800);
      } else {
        errorPassword.textContent = "Contrase√±a incorrecta.";
        passwordInput.style.borderColor = "#ff6b6b";
        setTimeout(() => {
          errorPassword.textContent = "";
          passwordInput.style.borderColor = "#fff8c2";
        }, 2000);
      }
    }

    verificarBtn.addEventListener("click", verificarPassword);
    passwordInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        verificarPassword();
      }
    });

    // Pool de part√≠culas para optimizaci√≥n
    function crearPoolParticulas() {
      for (let i = 0; i < 50; i++) {
        const particula = document.createElement('div');
        particula.className = 'particula-brillo';
        particula.style.display = 'none';
        particulasContainer.appendChild(particula);
        poolParticulas.push(particula);
      }
    }

    // Obtener part√≠cula del pool
    function obtenerParticula() {
      return poolParticulas.find(p => p.style.display === 'none');
    }

    // Liberar part√≠cula al pool
    function liberarParticula(particula) {
      particula.style.display = 'none';
      particula.style.animation = '';
    }

    // Crear brillos sutiles optimizados
    function crearBrillosSutiles(x, y, cantidad = 8) {
      for (let i = 0; i < cantidad; i++) {
        const particula = obtenerParticula();
        if (!particula) continue;

        const offsetX = (Math.random() - 0.5) * 40;
        const offsetY = (Math.random() - 0.5) * 40;
        
        particula.style.left = (x + offsetX) + 'px';
        particula.style.top = (y + offsetY) + 'px';
        particula.style.display = 'block';
        particula.style.animation = `flotarParticula 3s ease-out forwards`;

        setTimeout(() => liberarParticula(particula), 3000);
      }
    }

    // Crear brillos decorativos alrededor de la pantalla
    function crearBrillosDecorativos() {
      brillosDecorativos.innerHTML = '';
      const cantidad = window.innerWidth < 768 ? 15 : 25;
      
      for (let i = 0; i < cantidad; i++) {
        const brillo = document.createElement('div');
        brillo.className = 'brillo-decorativo';
        
        // Posicionamiento en los bordes de la pantalla
        const lado = Math.floor(Math.random() * 4); // 0: arriba, 1: derecha, 2: abajo, 3: izquierda
        let x, y;
        
        switch(lado) {
          case 0: // Arriba
            x = Math.random() * 100;
            y = Math.random() * 15;
            break;
          case 1: // Derecha
            x = 85 + Math.random() * 15;
            y = Math.random() * 100;
            break;
          case 2: // Abajo
            x = Math.random() * 100;
            y = 85 + Math.random() * 15;
            break;
          case 3: // Izquierda
            x = Math.random() * 15;
            y = Math.random() * 100;
            break;
        }
        
        brillo.style.left = x + '%';
        brillo.style.top = y + '%';
        brillo.style.animationDelay = Math.random() * 2 + 's';
        
        brillosDecorativos.appendChild(brillo);
      }
      
      brillosDecorativos.classList.add('visible');
    }

    // Inicializar brillos ambientales
    function inicializarBrillos() {
      brillos = [];
      const cantidad = window.innerWidth < 768 ? 20 : 30;
      
      for (let i = 0; i < cantidad; i++) {
        brillos.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          r: Math.random() * 1.5 + 0.5,
          velocidad: Math.random() * 1 + 0.3,
          opacity: Math.random() * 0.6 + 0.2,
          color: `hsl(${50 + Math.random() * 10}, 100%, ${70 + Math.random() * 20}%)`,
          blur: true
        });
      }
    }

    // Animar brillos con optimizaci√≥n de frame rate
    function animarBrillos(currentTime) {
      if (!animacionActiva) return;

      if (currentTime - lastTime < 16.67) { // 60 FPS m√°ximo
        requestAnimationFrame(animarBrillos);
        return;
      }

      lastTime = currentTime;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      brillos.forEach((brillo) => {
        brillo.y -= brillo.velocidad;

        if (brillo.y < -10) {
          brillo.y = canvas.height + 10;
          brillo.x = Math.random() * canvas.width;
        }

        ctx.save();
        ctx.globalAlpha = brillo.opacity;
        ctx.fillStyle = brillo.color;
        if (brillo.blur) {
          ctx.shadowBlur = 8;
          ctx.shadowColor = brillo.color;
        }
        ctx.beginPath();
        ctx.arc(brillo.x, brillo.y, brillo.r, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      });

      requestAnimationFrame(animarBrillos);
    }

    // Configurar eventos de interacci√≥n mejorados
    function configurarEventosInteraccion() {
      // Eventos de mouse
      eventoOverlay.addEventListener('mousedown', (e) => {
        isPressed = true;
        crearBrillosSutiles(e.clientX, e.clientY, 6);
        
        pressTimeout = setInterval(() => {
          if (isPressed) {
            crearBrillosSutiles(e.clientX, e.clientY, 4);
          }
        }, 150);
      });

      eventoOverlay.addEventListener('mouseup', () => {
        isPressed = false;
        if (pressTimeout) {
          clearInterval(pressTimeout);
          pressTimeout = null;
        }
      });

      eventoOverlay.addEventListener('mouseleave', () => {
        isPressed = false;
        if (pressTimeout) {
          clearInterval(pressTimeout);
          pressTimeout = null;
        }
      });

      // Eventos t√°ctiles para m√≥viles
      eventoOverlay.addEventListener('touchstart', (e) => {
        e.preventDefault();
        isPressed = true;
        const touch = e.touches[0];
        
        crearBrillosSutiles(touch.clientX, touch.clientY, 6);
        
        pressTimeout = setInterval(() => {
          if (isPressed) {
            crearBrillosSutiles(touch.clientX, touch.clientY, 4);
          }
        }, 150);
      });

      eventoOverlay.addEventListener('touchend', () => {
        isPressed = false;
        if (pressTimeout) {
          clearInterval(pressTimeout);
          pressTimeout = null;
        }
      });

      eventoOverlay.addEventListener('touchcancel', () => {
        isPressed = false;
        if (pressTimeout) {
          clearInterval(pressTimeout);
          pressTimeout = null;
        }
      });
    }

    // Configurar eventos del girasol
    function configurarGirasol() {
      girasol.addEventListener('click', () => {
        girasol.classList.add('balanceando');
        const rect = girasol.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        crearBrillosSutiles(centerX, centerY, 12);
        
        setTimeout(() => {
          girasol.classList.remove('balanceando');
        }, 2000);
      });

      girasol.addEventListener('touchstart', (e) => {
        e.preventDefault();
        girasol.classList.add('balanceando');
        const rect = girasol.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        crearBrillosSutiles(centerX, centerY, 12);
        
        setTimeout(() => {
          girasol.classList.remove('balanceando');
        }, 2000);
      });
    }

    // Transici√≥n a poema 2025
    boton2025.addEventListener("click", () => {
      seccion2020.classList.add('saliendo');

      setTimeout(() => {
        seccion2020.classList.add("oculto");
        seccion2025.classList.remove("oculto");

        setTimeout(() => {
          seccion2025.classList.add("visible");
          mostrarVersos();
        }, 100);
      }, 800);
    });

    // Mostrar versos l√≠nea por l√≠nea
    async function mostrarVersos() {
      if (index < versos.length) {
        const verso = versos[index];

        if (verso.trim() === "") {
          index++;
          setTimeout(mostrarVersos, 1500);
          return;
        }

        const linea = document.createElement("span");
        linea.className = "linea-verso";
        linea.textContent = verso;
        linea.style.animationDelay = '0.2s';

        lineasPoema.innerHTML = '';
        lineasPoema.appendChild(linea);

        index++;
        setTimeout(mostrarVersos, 3000);
      } else {
        // Mostrar frase final
        setTimeout(() => {
          lineasPoema.style.display = 'none';
          fraseFinal.classList.add("visible");
          girasolContainer.classList.add("visible");
          volverBtn.classList.add("visible");
          firmaCreador.classList.add("visible");

          // Crear brillos decorativos
          crearBrillosDecorativos();

          // Inicializar pool de part√≠culas
          crearPoolParticulas();

          // Configurar girasol
          configurarGirasol();

          // Configurar eventos de interacci√≥n para toda la pantalla
          eventoOverlay.classList.add('activo');
          configurarEventosInteraccion();

          // Iniciar brillos
          animacionActiva = true;
          inicializarBrillos();
          requestAnimationFrame(animarBrillos);

        }, 1000);
      }
    }

    // Funci√≥n para resetear completamente y volver al inicio
    function volverAlInicio() {
      // Detener todas las animaciones
      animacionActiva = false;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Limpiar part√≠culas
      poolParticulas.forEach(p => liberarParticula(p));

      // Resetear elementos de la frase final
      eventoOverlay.classList.remove('activo');
      fraseFinal.classList.remove("visible");
      girasolContainer.classList.remove("visible");
      brillosDecorativos.classList.remove('visible');
      volverBtn.classList.remove("visible");
      
      // Resetear poema 2025
      lineasPoema.style.display = 'flex';
      lineasPoema.innerHTML = "";
      index = 0;

      // Detener eventos
      isPressed = false;
      if (pressTimeout) {
        clearInterval(pressTimeout);
        pressTimeout = null;
      }

      // Ocultar poema 2025 y mostrar 2020
      seccion2025.classList.remove("visible");
      setTimeout(() => {
        seccion2025.classList.add("oculto");
        seccion2020.classList.remove("oculto");
        seccion2020.classList.remove('saliendo');
        
        setTimeout(() => {
          // Asegurar que el poema 2020 est√© completamente visible
          seccion2020.style.opacity = '1';
          seccion2020.style.transform = 'scale(1)';
        }, 100);
      }, 300);
    }

    // Event listener para el bot√≥n volver
    volverBtn.addEventListener("click", volverAlInicio);

  </script>
</body>
</html>